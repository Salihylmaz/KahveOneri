<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kahveci √ñnerisi Sistemi</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #8B4513, #A0522D, #CD853F);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        h1 {
            text-align: center;
            color: #4A2C1A;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .subtitle {
            text-align: center;
            color: #8B4513;
            margin-bottom: 40px;
            font-size: 1.2em;
        }

        .section {
            margin-bottom: 30px;
        }

        .section h2 {
            color: #4A2C1A;
            margin-bottom: 15px;
            font-size: 1.4em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .kahveci-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .kahveci-item {
            background: linear-gradient(135deg, #F5F5DC, #DEB887);
            border: 3px solid #D2B48C;
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            position: relative;
        }

        .kahveci-item:hover {
            background: linear-gradient(135deg, #DEB887, #D2B48C);
            border-color: #8B4513;
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(139, 69, 19, 0.3);
        }

        .kahveci-item.selected {
            background: linear-gradient(135deg, #8B4513, #A0522D);
            color: white;
            border-color: #4A2C1A;
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(139, 69, 19, 0.5);
        }

        .kahveci-item input {
            display: none;
        }

        .kahveci-logo {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .kahveci-name {
            font-weight: bold;
            font-size: 1.3em;
            margin-bottom: 10px;
        }

        .kahveci-info {
            font-size: 0.9em;
            opacity: 0.8;
            line-height: 1.4;
        }

        .tercih-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .tercih-item {
            background: #F5F5DC;
            border: 2px solid #D2B48C;
            border-radius: 12px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .tercih-item:hover {
            background: #DEB887;
            border-color: #8B4513;
            transform: translateY(-2px);
        }

        .tercih-item.selected {
            background: #8B4513;
            color: white;
            border-color: #4A2C1A;
        }

        .tercih-item input {
            display: none;
        }

        .tercih-item span {
            font-weight: bold;
            display: block;
            margin-bottom: 5px;
        }

        .tercih-item .aciklama {
            font-size: 0.9em;
            opacity: 0.8;
        }

        .alerjen-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .alerjen-item {
            background: #FFF5F5;
            border: 2px solid #FFB3B3;
            border-radius: 12px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .alerjen-item:hover {
            background: #FFEBEB;
            border-color: #FF8080;
        }

        .alerjen-item.selected {
            background: #FF6B6B;
            color: white;
            border-color: #FF4444;
        }

        .kahve-turu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .kahve-turu-item {
            background: #E8F4FD;
            border: 2px solid #B3D9FF;
            border-radius: 12px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .kahve-turu-item:hover {
            background: #D1ECFF;
            border-color: #80BFFF;
        }

        .kahve-turu-item.selected {
            background: #4A90E2;
            color: white;
            border-color: #357ABD;
        }

        .btn-container {
            text-align: center;
            margin: 30px 0;
        }

        .btn {
            background: linear-gradient(45deg, #8B4513, #A0522D);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(139, 69, 19, 0.4);
            margin: 0 10px 10px 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(139, 69, 19, 0.6);
        }

        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .btn-secondary {
            background: linear-gradient(45deg, #6B4423, #8B4513);
        }

        .btn-reset {
            background: linear-gradient(45deg, #666, #888);
        }

        .oneriler-container {
            margin-top: 30px;
            display: none;
        }

        .oneriler-container.show {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }

        .oneriler-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .oneriler-header h2 {
            color: #4A2C1A;
            font-size: 2em;
            margin-bottom: 10px;
        }

        .oneriler-alt-baslik {
            color: #8B4513;
            font-size: 1.1em;
        }

        .oneriler-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .oneri-card {
            background: linear-gradient(135deg, #F5F5DC, #DEB887);
            border-radius: 15px;
            padding: 25px;
            border: 3px solid #D2B48C;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .oneri-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(139, 69, 19, 0.3);
            border-color: #8B4513;
        }

        .oneri-rank {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #8B4513;
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2em;
        }

        .kahve-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .kahve-isim {
            font-size: 1.5em;
            color: #4A2C1A;
            font-weight: bold;
            margin-right: 10px;
        }

        .kahve-fiyat {
            font-size: 1.3em;
            color: #8B4513;
            font-weight: bold;
            background: rgba(255, 255, 255, 0.8);
            padding: 5px 12px;
            border-radius: 15px;
            white-space: nowrap;
        }

        .kahve-aciklama {
            font-size: 1em;
            color: #8B4513;
            margin-bottom: 15px;
            line-height: 1.6;
        }

        .kahve-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }

        .detail-item {
            background: rgba(139, 69, 19, 0.1);
            padding: 8px;
            border-radius: 8px;
            border: 1px solid rgba(139, 69, 19, 0.2);
        }

        .detail-label {
            font-weight: bold;
            color: #4A2C1A;
            margin-bottom: 3px;
            font-size: 0.9em;
        }

        .detail-value {
            color: #8B4513;
            font-size: 0.9em;
        }

        .uyum-badge {
            display: inline-block;
            background: #4CAF50;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .hata {
            background: #ffebee;
            color: #c62828;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #ffcdd2;
            margin-top: 20px;
            display: none;
        }

        .loading {
            text-align: center;
            color: #8B4513;
            font-style: italic;
            display: none;
            padding: 20px;
        }

        .coffee-icon {
            font-size: 3em;
            text-align: center;
            margin-bottom: 20px;
        }

        .menu-container {
            max-height: 500px;
            overflow-y: auto;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            display: none;
        }

        .menu-item {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            border-left: 4px solid #8B4513;
        }

        .menu-item-name {
            font-weight: bold;
            color: #4A2C1A;
            margin-bottom: 5px;
        }

        .menu-item-price {
            color: #8B4513;
            font-weight: bold;
            float: right;
        }

        .menu-item-desc {
            color: #666;
            font-size: 0.9em;
            line-height: 1.4;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #8B4513;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="coffee-icon">‚òï</div>
        <h1>Kahveci √ñnerisi Sistemi</h1>
        <p class="subtitle">Size √∂zel kahve √∂nerilerini ke≈üfedin! ‚òï‚ú®</p>

        <div class="section">
            <h2>üè™ Kahveci Se√ßin:</h2>
            <div class="kahveci-grid" id="kahveci-grid">
                <!-- Kahveciler dinamik olarak y√ºklenecek -->
            </div>
        </div>

        <div class="section">
            <h2>‚òï Kahve T√ºr√º Tercihiniz:</h2>
            <div class="kahve-turu-grid">
                <div class="kahve-turu-item" onclick="toggleKahveTuru('espresso')">
                    <input type="radio" name="kahve-turu" id="espresso" value="espresso">
                    <span>‚òï Espresso</span>
                    <div class="aciklama">Yoƒüun ve g√º√ßl√º</div>
                </div>
                <div class="kahve-turu-item" onclick="toggleKahveTuru('latte')">
                    <input type="radio" name="kahve-turu" id="latte" value="latte">
                    <span>ü•õ Latte</span>
                    <div class="aciklama">S√ºtl√º ve kremsi</div>
                </div>
                <div class="kahve-turu-item" onclick="toggleKahveTuru('cappuccino')">
                    <input type="radio" name="kahve-turu" id="cappuccino" value="cappuccino">
                    <span>‚òÅÔ∏è Cappuccino</span>
                    <div class="aciklama">K√∂p√ºkl√º ve dengeli</div>
                </div>
                <div class="kahve-turu-item" onclick="toggleKahveTuru('americano')">
                    <input type="radio" name="kahve-turu" id="americano" value="americano">
                    <span>üíß Americano</span>
                    <div class="aciklama">Hafif ve sade</div>
                </div>
                <div class="kahve-turu-item" onclick="toggleKahveTuru('mocha')">
                    <input type="radio" name="kahve-turu" id="mocha" value="mocha">
                    <span>üç´ Mocha</span>
                    <div class="aciklama">√áikolatalƒ±</div>
                </div>
                <div class="kahve-turu-item" onclick="toggleKahveTuru('filter')">
                    <input type="radio" name="kahve-turu" id="filter" value="filter">
                    <span>üîç Filtre</span>
                    <div class="aciklama">Geleneksel</div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>‚ú® Kahve Tercihleriniz:</h2>
            <div class="tercih-grid">
                <div class="tercih-item" onclick="toggleTercih('guclu')">
                    <input type="checkbox" id="guclu" value="guclu">
                    <span>üî• G√º√ßl√º</span>
                    <div class="aciklama">Yoƒüun ve sert</div>
                </div>
                <div class="tercih-item" onclick="toggleTercih('hafif')">
                    <input type="checkbox" id="hafif" value="hafif">
                    <span>üå∏ Hafif</span>
                    <div class="aciklama">Yumu≈üak ve nazik</div>
                </div>
                <div class="tercih-item" onclick="toggleTercih('sicak')">
                    <input type="checkbox" id="sicak" value="sicak">
                    <span>üî• Sƒ±cak</span>
                    <div class="aciklama">Geleneksel sƒ±cak</div>
                </div>
                <div class="tercih-item" onclick="toggleTercih('soguk')">
                    <input type="checkbox" id="soguk" value="soguk">
                    <span>üßä Soƒüuk</span>
                    <div class="aciklama">Serinletici</div>
                </div>
                <div class="tercih-item" onclick="toggleTercih('tatli')">
                    <input type="checkbox" id="tatli" value="tatli">
                    <span>üç´ Tatlƒ±</span>
                    <div class="aciklama">Aromalƒ± ve tatlƒ±</div>
                </div>
                <div class="tercih-item" onclick="toggleTercih('sade')">
                    <input type="checkbox" id="sade" value="sade">
                    <span>‚òï Sade</span>
                    <div class="aciklama">Doƒüal kahve tadƒ±</div>
                </div>
                <div class="tercih-item" onclick="toggleTercih('organik')">
                    <input type="checkbox" id="organik" value="organik">
                    <span>üå± Organik</span>
                    <div class="aciklama">Doƒüal ve saf</div>
                </div>
                <div class="tercih-item" onclick="toggleTercih('kafeinsiz')">
                    <input type="checkbox" id="kafeinsiz" value="kafeinsiz">
                    <span>üò¥ Kafeinsiz</span>
                    <div class="aciklama">Kafein hassasiyeti</div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>‚ö†Ô∏è Alerjen Bilgileri (Varsa):</h2>
            <div class="alerjen-grid">
                <div class="alerjen-item" onclick="toggleAlerjen('sut')">
                    <input type="checkbox" id="sut" value="sut">
                    <span>ü•õ S√ºt Alerjisi</span>
                    <div class="aciklama">Laktoz intoleransƒ±</div>
                </div>
                <div class="alerjen-item" onclick="toggleAlerjen('gluten')">
                    <input type="checkbox" id="gluten" value="gluten">
                    <span>üåæ Gluten Alerjisi</span>
                    <div class="aciklama">√á√∂lyak hastalƒ±ƒüƒ±</div>
                </div>
                <div class="alerjen-item" onclick="toggleAlerjen('findik')">
                    <input type="checkbox" id="findik" value="findik">
                    <span>ü•ú Fƒ±ndƒ±k Alerjisi</span>
                    <div class="aciklama">Kuruyemi≈ü alerjisi</div>
                </div>
                <div class="alerjen-item" onclick="toggleAlerjen('soya')">
                    <input type="checkbox" id="soya" value="soya">
                    <span>üå± Soya Alerjisi</span>
                    <div class="aciklama">Soya √ºr√ºnleri</div>
                </div>
                <div class="alerjen-item" onclick="toggleAlerjen('yumurta')">
                    <input type="checkbox" id="yumurta" value="yumurta">
                    <span>ü•ö Yumurta Alerjisi</span>
                    <div class="aciklama">Yumurta √ºr√ºnleri</div>
                </div>
            </div>
        </div>

        <div class="btn-container">
            <button class="btn" onclick="kahveOnerisiAl()">
                <span class="loading-spinner" style="display: none;"></span>
                Kahve √ñnerilerini Al ‚òï
            </button>
            <button class="btn btn-secondary" onclick="menuGoster()">
                Tam Men√ºy√º G√∂r üìã
            </button>
            <button class="btn btn-reset" onclick="formuSifirla()">
                Formu Sƒ±fƒ±rla üîÑ
            </button>
        </div>

        <div class="loading">
            <div class="loading-spinner"></div>
            Sizin i√ßin en iyi kahve √∂nerilerini hazƒ±rlƒ±yoruz... Bu birka√ß saniye s√ºrebilir ‚òï
        </div>

        <div class="hata" id="hata-mesaji">
        </div>

        <div class="oneriler-container" id="oneriler-container">
            <div class="oneriler-header">
                <h2>üéØ Size √ñzel Kahve √ñnerileri</h2>
                <p class="oneriler-alt-baslik">Tercihlerinize g√∂re en uygun se√ßenekler</p>
            </div>
            <div class="oneriler-grid" id="oneriler-grid">
                <!-- √ñneriler dinamik olarak y√ºklenecek -->
            </div>
        </div>

        <div class="menu-container" id="menu-container">
            <h3>üìã Tam Men√º - <span id="menu-kahveci-adi"></span></h3>
            <div id="menu-list"></div>
        </div>
    </div>

    <script>
        let secilenKahveci = null;
        let secilenKahveTuru = null;

        // Sayfa y√ºklendiƒüinde kahvecileri getir
        window.onload = function() {
            kahvecileriYukle();
        };

        function kahvecileriYukle() {
            const kahveciler = [
                {
                    isim: 'Starbucks',
                    logo: 'üü¢',
                    aciklama: 'D√ºnya √ßapƒ±nda √ºnl√º kahve zinciri, geni≈ü i√ßecek yelpazesi',
                    ozellik: 'Premium kahveler ve √∂zel karƒ±≈üƒ±mlar'
                },
                {
                    isim: 'Gloria Jeans',
                    logo: 'üü°',
                    aciklama: 'Avustralya k√∂kenli premium kahve markasƒ±',
                    ozellik: 'Taze √ßekilmi≈ü kahveler ve √∂zel tarifler'
                },
                {
                    isim: 'Mikel Coffee',
                    logo: 'üîµ',
                    aciklama: 'Yunan k√∂kenli kahveci, √∂zel espresso karƒ±≈üƒ±mlarƒ±',
                    ozellik: 'Geleneksel Yunan kahve k√ºlt√ºr√º'
                },
                {
                    isim: 'Coffy',
                    logo: 'üü§',
                    aciklama: 'T√ºrk kahve zinciri, √∂zel lezzet se√ßenekleri',
                    ozellik: 'T√ºrk kahvesi uzmanlƒ±ƒüƒ±'
                },
                {
                    isim: 'Caribou Coffee',
                    logo: 'üü†',
                    aciklama: 'Amerika k√∂kenli kahve zinciri',
                    ozellik: 'Soƒüuk kahve uzmanƒ±'
                },
                {
                    isim: 'Dunkin',
                    logo: 'üî¥',
                    aciklama: 'Hƒ±zlƒ± servis ve pratik kahveler',
                    ozellik: 'Kahvaltƒ± kahveleri'
                }
            ];
            
            const grid = document.getElementById('kahveci-grid');
            grid.innerHTML = '';

            kahveciler.forEach(kahveci => {
                const div = document.createElement('div');
                div.className = 'kahveci-item';
                div.onclick = () => kahveciSec(kahveci.isim, div);
                
                div.innerHTML = `
                    <input type="radio" name="kahveci" value="${kahveci.isim}">
                    <div class="kahveci-logo">${kahveci.logo}</div>
                    <div class="kahveci-name">${kahveci.isim}</div>
                    <div class="kahveci-info">${kahveci.aciklama}</div>
                    <div style="margin-top: 10px; font-size: 0.8em; font-style: italic;">${kahveci.ozellik}</div>
                `;
                
                grid.appendChild(div);
            });
        }

        function kahveciSec(kahveci, element) {
            document.querySelectorAll('.kahveci-item').forEach(item => {
                item.classList.remove('selected');
            });
            
            element.classList.add('selected');
            secilenKahveci = kahveci;
            
            document.getElementById('menu-container').style.display = 'none';
            document.getElementById('oneriler-container').classList.remove('show');
        }

        function toggleKahveTuru(turu) {
            document.querySelectorAll('.kahve-turu-item').forEach(item => {
                item.classList.remove('selected');
            });
            
            const item = document.getElementById(turu).parentElement;
            item.classList.add('selected');
            secilenKahveTuru = turu;
        }

        function toggleTercih(tercih) {
            const checkbox = document.getElementById(tercih);
            const item = checkbox.parentElement;
            
            checkbox.checked = !checkbox.checked;
            if (checkbox.checked) {
                item.classList.add('selected');
            } else {
                item.classList.remove('selected');
            }
        }

        function toggleAlerjen(alerjen) {
            const checkbox = document.getElementById(alerjen);
            const item = checkbox.parentElement;
            
            checkbox.checked = !checkbox.checked;
            if (checkbox.checked) {
                item.classList.add('selected');
            } else {
                item.classList.remove('selected');
            }
        }

        function kahveOnerisiAl() {
            const tercihCheckboxes = document.querySelectorAll('.tercih-grid input[type="checkbox"]:checked');
            const tercihler = Array.from(tercihCheckboxes).map(cb => cb.value);
            
            const alerjenCheckboxes = document.querySelectorAll('.alerjen-grid input[type="checkbox"]:checked');
            const alerjenler = Array.from(alerjenCheckboxes).map(cb => cb.value);
            
            // Hata ve √∂nceki sonu√ßlarƒ± temizle
            document.getElementById('hata-mesaji').style.display = 'none';
            document.getElementById('oneriler-container').classList.remove('show');
            document.getElementById('menu-container').style.display = 'none';
            
            if (!secilenKahveci) {
                showError('L√ºtfen bir kahveci se√ßin! ‚òï');
                return;
            }
            
            if (!secilenKahveTuru) {
                showError('L√ºtfen bir kahve t√ºr√º se√ßin! ‚òï');
                return;
            }

            // Y√ºkleme animasyonu
            const loadingDiv = document.querySelector('.loading');
            const btnSpinner = document.querySelector('.loading-spinner');
            const btn = document.querySelector('.btn');
            
            loadingDiv.style.display = 'block';
            btnSpinner.style.display = 'inline-block';
            btn.disabled = true;

            // Demo i√ßin √∂rnek √∂neriler - ger√ßek uygulamada Flask API'ye istek g√∂nderilecek
            setTimeout(() => {
                loadingDiv.style.display = 'none';
                btnSpinner.style.display = 'none';
                btn.disabled = false;
                
                const ornekOneriler = generateOneriler(secilenKahveci, secilenKahveTuru, tercihler, alerjenler);
                showOneriler(ornekOneriler);
            }, 2500);
        }

        function generateOneriler(kahveci, kahveTuru, tercihler, alerjenler) {
            const oneriler = [];
            
            // Ana √∂neri
            const anaOneri = {
                sira: 1,
                kahve_adi: getKahveAdi(kahveci, kahveTuru, tercihler),
                fiyat: Math.floor(Math.random() * 25) + 15,
                aciklama: `${tercihler.includes('tatli') ? 'Tatlƒ±' : tercihler.includes('guclu') ? 'G√º√ßl√º' : 'Dengeli'} bir ${kahveTuru} deneyimi. Tercihlerinize g√∂re √∂zel olarak hazƒ±rlandƒ±.`,
                kategori: tercihler.includes('soguk') ? 'Soƒüuk ƒ∞√ßecekler' : 'Sƒ±cak ƒ∞√ßecekler',
                boyut_secenekleri: getBoyutSecenekleri(kahveci),
                uyum_yuzdesi: 95,
                ozellikler: getOzellikler(tercihler, alerjenler),
                alerjen_uyari: getAlerjenUyari(alerjenler)
            };
            oneriler.push(anaOneri);
            
            // ƒ∞kinci √∂neri
            const ikinciOneri = {
                sira: 2,
                kahve_adi: getAlternatifKahve(kahveci, kahveTuru, tercihler),
                fiyat: Math.floor(Math.random() * 20) + 12,
                aciklama: `Alternatif se√ßenek olarak ${kahveTuru} bazlƒ± bu i√ßecek de size uygun olabilir.`,
                kategori: tercihler.includes('sicak') ? 'Sƒ±cak ƒ∞√ßecekler' : 'Soƒüuk ƒ∞√ßecekler',
                boyut_secenekleri: getBoyutSecenekleri(kahveci),
                uyum_yuzdesi: 88,
                ozellikler: getOzellikler(tercihler, alerjenler, true),
                alerjen_uyari: getAlerjenUyari(alerjenler)
            };
            oneriler.push(ikinciOneri);
            
            // √ú√ß√ºnc√º √∂neri
            const ucuncuOneri = {
                sira: 3,
                kahve_adi: getFarkliBirSecim(kahveci, tercihler),
                fiyat: Math.floor(Math.random() * 18) + 10,
                aciklama: `Farklƒ± bir deneyim i√ßin √∂nerilen bu se√ßenek de tercihlerinizle uyumlu.`,
                kategori: '√ñzel ƒ∞√ßecekler',
                boyut_secenekleri: getBoyutSecenekleri(kahveci),
                uyum_yuzdesi: 82,
                ozellikler: getOzellikler(tercihler, alerjenler, false, true),
                alerjen_uyari: getAlerjenUyari(alerjenler)
            };
            oneriler.push(ucuncuOneri);
            
            return {
                kahveci: kahveci,
                kahve_turu: kahveTuru,
                tercihler: tercihler,
                alerjenler: alerjenler,
                oneriler: oneriler
            };
        }

        function getKahveAdi(kahveci, turu, tercihler) {
            const kahveAdlari = {
                'Starbucks': {
                    'espresso': tercihler.includes('tatli') ? 'Caramel Macchiato' : 'Pike Place Roast',
                    'latte': tercihler.includes('soguk') ? 'Iced Vanilla Latte' : 'Caff√® Latte',
                    'cappuccino': tercihler.includes('tatli') ? 'Cinnamon Dolce Cappuccino' : 'Cappuccino',
                    'americano': tercihler.includes('soguk') ? 'Iced Americano' : 'Caff√® Americano',
                    'mocha': tercihler.includes('soguk') ? 'Iced White Chocolate Mocha' : 'Caff√® Mocha',
                    'filter': 'Pour Over Coffee'
                },
                'Gloria Jeans': {
                    'espresso': 'Signature Espresso Blend',
                    'latte': tercihler.includes('tatli') ? 'Vanilla Bean Latte' : 'Classic Latte',
                    'cappuccino': 'Italian Cappuccino',
                    'americano': 'Long Black',
                    'mocha': 'Mudslide Mocha',
                    'filter': 'Gloria Filter Coffee'
                },
                'Mikel Coffee': {
                    'espresso': 'Greek Espresso',
                    'latte': 'Freddo Cappuccino',
                    'cappuccino': tercihler.includes('soguk') ? 'Freddo Cappuccino' : 'Hot Cappuccino',
                    'americano': 'Filter Coffee',
                    'mocha': 'Chocolate Freddo',
                    'filter': 'Traditional Greek Coffee'
                },
                'Coffy': {
                    'espresso': 'T√ºrk Espresso',
                    'latte': tercihler.includes('tatli') ? 'Karamelli Latte' : 'Klasik Latte',
                    'cappuccino': 'ƒ∞talyan Cappuccino',
                    'americano': 'Americano Special',
                    'mocha': '√áikolatalƒ± Mocha',
                    'filter': 'T√ºrk Kahvesi'
                },
                'Caribou Coffee': {
                    'espresso': 'Caribou Blend Espresso',
                    'latte': tercihler.includes('soguk') ? 'Iced Latte' : 'Hot Latte',
                    'cappuccino': 'Cappuccino',
                    'americano': tercihler.includes('soguk') ? 'Cold Press' : 'Americano',
                    'mocha': 'Turtle Mocha',
                    'filter': 'Drip Coffee'
                },
                'Dunkin': {
                    'espresso': 'Espresso',
                    'latte': tercihler.includes('soguk') ? 'Iced Latte' : 'Hot Latte',
                    'cappuccino': 'Cappuccino',
                    'americano': tercihler.includes('soguk') ? 'Iced Coffee' : 'Hot Coffee',
                    'mocha': 'Mocha Latte',
                    'filter': 'Original Blend'
                }
            };
            
            return kahveAdlari[kahveci]?.[turu] || `${turu.charAt(0).toUpperCase() + turu.slice(1)} Special`;
        }

        function getAlternatifKahve(kahveci, turu, tercihler) {
            const alternatifler = {
                'espresso': tercihler.includes('tatli') ? 'Flavored Espresso' : 'Double Shot Espresso',
                'latte': tercihler.includes('organik') ? 'Organic Latte' : 'Hazelnut Latte',
                'cappuccino': tercihler.includes('kafeinsiz') ? 'Decaf Cappuccino' : 'Extra Foam Cappuccino',
                'americano': tercihler.includes('guclu') ? 'Strong Americano' : 'Mild Americano',
                'mocha': tercihler.includes('sut') ? 'Dairy-Free Mocha' : 'White Chocolate Mocha',
                'filter': tercihler.includes('organik') ? 'Organic Filter Coffee' : 'House Blend'
            };
            
            return alternatifler[turu] || `Alternative ${turu}`;
        }

        function getFarkliBirSecim(kahveci, tercihler) {
            if (tercihler.includes('soguk')) {
                return kahveci === 'Starbucks' ? 'Frappuccino' : 'Iced Specialty';
            } else if (tercihler.includes('tatli')) {
                return 'Seasonal Special';
            } else if (tercihler.includes('organik')) {
                return 'Organic House Special';
            } else {
                return 'Chef\'s Recommendation';
            }
        }

        function getBoyutSecenekleri(kahveci) {
            const boyutlar = {
                'Starbucks': 'Tall (355ml), Grande (473ml), Venti (591ml)',
                'Gloria Jeans': 'Regular (300ml), Large (450ml)',
                'Mikel Coffee': 'Small (250ml), Medium (350ml), Large (450ml)',
                'Coffy': 'K√º√ß√ºk (200ml), Orta (300ml), B√ºy√ºk (400ml)',
                'Caribou Coffee': 'Small (355ml), Medium (473ml), Large (591ml)',
                'Dunkin': 'Small (295ml), Medium (414ml), Large (591ml)'
            };
            
            return boyutlar[kahveci] || 'K√º√ß√ºk, Orta, B√ºy√ºk';
        }

        function getOzellikler(tercihler, alerjenler, alternatif = false, ozel = false) {
            const ozellikler = [];
            
            if (tercihler.includes('organik')) ozellikler.push('Organik sertifikalƒ±');
            if (tercihler.includes('kafeinsiz')) ozellikler.push('Kafeinsiz se√ßenek');
            if (tercihler.includes('guclu')) ozellikler.push('Yoƒüun kafein');
            if (tercihler.includes('hafif')) ozellikler.push('Hafif ve yumu≈üak');
            if (tercihler.includes('tatli')) ozellikler.push('Doƒüal tatlandƒ±rƒ±cƒ±');
            if (tercihler.includes('sade')) ozellikler.push('Katkƒ±sƒ±z doƒüal');
            
            if (alerjenler.includes('sut')) ozellikler.push('Laktozsuz alternatif mevcut');
            if (alerjenler.includes('gluten')) ozellikler.push('Glutensiz');
            if (alerjenler.includes('findik')) ozellikler.push('Fƒ±ndƒ±k i√ßermez');
            
            if (alternatif) ozellikler.push('Alternatif tarif');
            if (ozel) ozellikler.push('Sezonluk √∂zel');
            
            return ozellikler.slice(0, 4); // En fazla 4 √∂zellik g√∂ster
        }

        function getAlerjenUyari(alerjenler) {
            if (alerjenler.length === 0) return null;
            
            const uyarilar = {
                'sut': 'S√ºt √ºr√ºnleri i√ßerebilir - Alternatif s√ºt se√ßenekleri mevcut',
                'gluten': 'Gluten i√ßermez - √áapraz kontaminasyon riski d√º≈ü√ºk',
                'findik': 'Fƒ±ndƒ±k ve kuruyemi≈ü i√ßermez',
                'soya': 'Soya i√ßermez - Alternatif s√ºt se√ßenekleri',
                'yumurta': 'Yumurta i√ßermez'
            };
            
            return alerjenler.map(a => uyarilar[a]).filter(Boolean).join(', ');
        }

        function showOneriler(data) {
            const container = document.getElementById('oneriler-container');
            const grid = document.getElementById('oneriler-grid');
            
            grid.innerHTML = '';
            
            data.oneriler.forEach(oneri => {
                const card = document.createElement('div');
                card.className = 'oneri-card';
                
                const uyumRenk = oneri.uyum_yuzdesi >= 90 ? '#4CAF50' : 
                                oneri.uyum_yuzdesi >= 80 ? '#FF9800' : '#FF5722';
                
                card.innerHTML = `
                    <div class="oneri-rank">${oneri.sira}</div>
                    <div class="uyum-badge" style="background: ${uyumRenk}">
                        %${oneri.uyum_yuzdesi} Uyumlu
                    </div>
                    <div class="kahve-header">
                        <div class="kahve-isim">${oneri.kahve_adi}</div>
                        <div class="kahve-fiyat">${oneri.fiyat} ‚Ç∫</div>
                    </div>
                    <div class="kahve-aciklama">${oneri.aciklama}</div>
                    ${oneri.alerjen_uyari ? `<div style="background: #FFF3CD; color: #856404; padding: 8px; border-radius: 5px; margin: 10px 0; font-size: 0.9em;"><strong>‚ö†Ô∏è Alerjen Bilgisi:</strong> ${oneri.alerjen_uyari}</div>` : ''}
                    <div class="kahve-details">
                        <div class="detail-item">
                            <div class="detail-label">Kategori</div>
                            <div class="detail-value">${oneri.kategori}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Boyut Se√ßenekleri</div>
                            <div class="detail-value">${oneri.boyut_secenekleri}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">√ñzellikler</div>
                            <div class="detail-value">${oneri.ozellikler.join(', ') || 'Standart'}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Kahveci</div>
                            <div class="detail-value">${data.kahveci}</div>
                        </div>
                    </div>
                `;
                
                grid.appendChild(card);
            });
            
            container.classList.add('show');
        }

        function menuGoster() {
            if (!secilenKahveci) {
                showError('L√ºtfen √∂nce bir kahveci se√ßin! ‚òï');
                return;
            }

            const menuContainer = document.getElementById('menu-container');
            const menuList = document.getElementById('menu-list');
            const kahveciAdi = document.getElementById('menu-kahveci-adi');
            
            kahveciAdi.textContent = secilenKahveci;
            menuList.innerHTML = '<p>Men√º y√ºkleniyor...</p>';
            menuContainer.style.display = 'block';

            // Demo i√ßin √∂rnek men√º
            setTimeout(() => {
                const ornekMenu = generateMenu(secilenKahveci);
                
                menuList.innerHTML = '';
                
                ornekMenu.forEach(item => {
                    const div = document.createElement('div');
                    div.className = 'menu-item';
                    
                    div.innerHTML = `
                        <div class="menu-item-name">${item.kahve_adi}</div>
                        <div class="menu-item-price">${item.fiyat} ‚Ç∫</div>
                        <div class="menu-item-desc">${item.aciklama}</div>
                        <div style="clear: both; margin-top: 10px;">
                            <small><strong>Kategori:</strong> ${item.kategori}</small><br>
                            <small><strong>Boyutlar:</strong> ${item.boyut_secenekleri}</small>
                            ${item.alerjen_bilgisi ? `<br><small><strong>‚ö†Ô∏è Alerjen:</strong> ${item.alerjen_bilgisi}</small>` : ''}
                        </div>
                    `;
                    
                    menuList.appendChild(div);
                });
            }, 1000);
        }

        function generateMenu(kahveci) {
            const menuSablonlari = {
                'Starbucks': [
                    { kahve_adi: 'Americano', fiyat: 14, aciklama: 'Klasik espresso ve sƒ±cak su karƒ±≈üƒ±mƒ±', kategori: 'Sƒ±cak ƒ∞√ßecekler', boyut_secenekleri: 'Tall, Grande, Venti', alerjen_bilgisi: null },
                    { kahve_adi: 'Latte', fiyat: 18, aciklama: 'Espresso ve buharda ƒ±sƒ±tƒ±lmƒ±≈ü s√ºt', kategori: 'Sƒ±cak ƒ∞√ßecekler', boyut_secenekleri: 'Tall, Grande, Venti', alerjen_bilgisi: 'S√ºt i√ßerir' },
                    { kahve_adi: 'Cappuccino', fiyat: 16, aciklama: 'Espresso, sƒ±cak s√ºt ve s√ºt k√∂p√ºƒü√º', kategori: 'Sƒ±cak ƒ∞√ßecekler', boyut_secenekleri: 'Tall, Grande', alerjen_bilgisi: 'S√ºt i√ßerir' },
                    { kahve_adi: 'Caramel Macchiato', fiyat: 22, aciklama: 'Vanilya aromalƒ± s√ºt, espresso ve karamel sos', kategori: 'Tatlƒ± ƒ∞√ßecekler', boyut_secenekleri: 'Tall, Grande, Venti', alerjen_bilgisi: 'S√ºt i√ßerir' },
                    { kahve_adi: 'Frappuccino', fiyat: 24, aciklama: 'Buzlu kahve karƒ±≈üƒ±mƒ±', kategori: 'Soƒüuk ƒ∞√ßecekler', boyut_secenekleri: 'Tall, Grande, Venti', alerjen_bilgisi: 'S√ºt i√ßerir' },
                    { kahve_adi: 'Pike Place Roast', fiyat: 12, aciklama: 'Orta kavrulmu≈ü filtre kahve', kategori: 'Filtre Kahveler', boyut_secenekleri: 'Tall, Grande', alerjen_bilgisi: null }
                ],
                'Gloria Jeans': [
                    { kahve_adi: 'Long Black', fiyat: 13, aciklama: 'G√º√ßl√º siyah kahve', kategori: 'Sƒ±cak ƒ∞√ßecekler', boyut_secenekleri: 'Regular, Large', alerjen_bilgisi: null },
                    { kahve_adi: 'Flat White', fiyat: 17, aciklama: 'Mikrok√∂p√ºk s√ºt ile espresso', kategori: 'Sƒ±cak ƒ∞√ßecekler', boyut_secenekleri: 'Regular, Large', alerjen_bilgisi: 'S√ºt i√ßerir' },
                    { kahve_adi: 'Mudslide Mocha', fiyat: 21, aciklama: '√áikolata ve karamel karƒ±≈üƒ±mƒ±', kategori: 'Tatlƒ± ƒ∞√ßecekler', boyut_secenekleri: 'Regular, Large', alerjen_bilgisi: 'S√ºt, kakao i√ßerir' },
                    { kahve_adi: 'Iced Coffee', fiyat: 15, aciklama: 'Soƒüuk filtre kahve', kategori: 'Soƒüuk ƒ∞√ßecekler', boyut_secenekleri: 'Regular, Large', alerjen_bilgisi: null },
                    { kahve_adi: 'Chai Latte', fiyat: 19, aciklama: 'Baharatlƒ± √ßay latte', kategori: '√ñzel ƒ∞√ßecekler', boyut_secenekleri: 'Regular, Large', alerjen_bilgisi: 'S√ºt i√ßerir' }
                ]
            };
            
            // Diƒüer kahveciler i√ßin varsayƒ±lan men√º
            const varsayilanMenu = [
                { kahve_adi: 'Espresso', fiyat: 8, aciklama: 'Yoƒüun ve g√º√ßl√º kahve', kategori: 'Sƒ±cak ƒ∞√ßecekler', boyut_secenekleri: 'Single, Double', alerjen_bilgisi: null },
                { kahve_adi: 'Americano', fiyat: 12, aciklama: 'Espresso ve sƒ±cak su', kategori: 'Sƒ±cak ƒ∞√ßecekler', boyut_secenekleri: 'K√º√ß√ºk, Orta, B√ºy√ºk', alerjen_bilgisi: null },
                { kahve_adi: 'Latte', fiyat: 16, aciklama: 'Espresso ve s√ºt', kategori: 'Sƒ±cak ƒ∞√ßecekler', boyut_secenekleri: 'K√º√ß√ºk, Orta, B√ºy√ºk', alerjen_bilgisi: 'S√ºt i√ßerir' },
                { kahve_adi: 'Cappuccino', fiyat: 14, aciklama: 'Espresso, s√ºt ve k√∂p√ºk', kategori: 'Sƒ±cak ƒ∞√ßecekler', boyut_secenekleri: 'K√º√ß√ºk, Orta', alerjen_bilgisi: 'S√ºt i√ßerir' },
                { kahve_adi: 'Mocha', fiyat: 18, aciklama: '√áikolatalƒ± kahve', kategori: 'Tatlƒ± ƒ∞√ßecekler', boyut_secenekleri: 'K√º√ß√ºk, Orta, B√ºy√ºk', alerjen_bilgisi: 'S√ºt, kakao i√ßerir' },
                { kahve_adi: 'Iced Coffee', fiyat: 13, aciklama: 'Soƒüuk kahve', kategori: 'Soƒüuk ƒ∞√ßecekler', boyut_secenekleri: 'Orta, B√ºy√ºk', alerjen_bilgisi: null }
            ];
            
            return menuSablonlari[kahveci] || varsayilanMenu;
        }

        function formuSifirla() {
            // Kahveci se√ßimini sƒ±fƒ±rla
            document.querySelectorAll('.kahveci-item').forEach(item => {
                item.classList.remove('selected');
            });
            secilenKahveci = null;
            
            // Kahve t√ºr√º se√ßimini sƒ±fƒ±rla
            document.querySelectorAll('.kahve-turu-item').forEach(item => {
                item.classList.remove('selected');
            });
            secilenKahveTuru = null;
            
            // Tercihleri sƒ±fƒ±rla
            document.querySelectorAll('.tercih-item').forEach(item => {
                item.classList.remove('selected');
                const checkbox = item.querySelector('input[type="checkbox"]');
                if (checkbox) checkbox.checked = false;
            });
            
            // Alerjenleri sƒ±fƒ±rla
            document.querySelectorAll('.alerjen-item').forEach(item => {
                item.classList.remove('selected');
                const checkbox = item.querySelector('input[type="checkbox"]');
                if (checkbox) checkbox.checked = false;
            });
            
            // Sonu√ßlarƒ± gizle
            document.getElementById('oneriler-container').classList.remove('show');
            document.getElementById('menu-container').style.display = 'none';
            document.getElementById('hata-mesaji').style.display = 'none';
        }

        function showError(mesaj) {
            const hataDiv = document.getElementById('hata-mesaji');
            hataDiv.textContent = mesaj;
            hataDiv.style.display = 'block';
            
            // 5 saniye sonra otomatik gizle
            setTimeout(() => {
                hataDiv.style.display = 'none';
            }, 5000);
        }
    </script>
</body>
</html>
